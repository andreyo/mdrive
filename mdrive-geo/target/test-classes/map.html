<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>    <title>Примеры YMapsML. Создание меню для групп загруженного YMapsML.</title>    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />        <!-- server key http://77.120.121.242 -->    <script src="http://api-maps.yandex.ru/1.1/index.xml?key=AD1TuU4BAAAAVv1xOwQAUdDWIChwLqgjpHQCgY1Br1georYAAAAAAAAAAAAZnL0JgPXq0A_NZSFXxnYFbMugog==" type="text/javascript"></script>    <script type="text/javascript">        // Создание обработчика для события window.onLoad        YMaps.jQuery(function () {            // Создание экземпляра карты и его привязка к созданному контейнеру            var map = new YMaps.Map(YMaps.jQuery("#YMapsID")[0]);            // Установка для карты ее центра и масштаба            map.setCenter(new YMaps.GeoPoint(30.530946,50.443705), 11);            // Добавление элементов управления            map.enableScrollZoom();            map.addControl(new YMaps.ToolBar());            map.addControl(new YMaps.TypeControl());            map.addControl(new YMaps.Zoom());            // Загрузка YMapsML            var ml = new YMaps.YMapsML("http://77.120.121.242/ymap_coordinates_11_08_2011.xml");            // Обработчик успешной загрузки            YMaps.Events.observe(ml, ml.Events.Load, function (ml) {                // Создание списка групп                ml.get(0).forEach(function (item) {                    addMenuItem(item, map, YMaps.jQuery("#menu"));                });            });            // Обработчик неудачной загрузки            YMaps.Events.observe(ml, ml.Events.Fault, function (ml, error) {                alert("При загрузке данных произошла ошибка: " + error);            });        })        // Добавление одного пункта в список        function addMenuItem (group, map, menuContainer) {            // Показать/скрыть группу на карте            YMaps.jQuery("<a class=\"title\" href=\"#\">" + group.name + "</a>")                .bind("click", function () {                    var link = YMaps.jQuery(this);                    // Если пункт меню "неактивный", то добавляем группу на карту,                    // иначе - удаляем с карты                    if (link.hasClass("active")) {                        map.removeOverlay(group);                    } else {                        map.addOverlay(group);                    }                    // Меняем "активность" пункта меню                    link.toggleClass("active");                    return false;                })                // Добавление нового пункта меню в список                .appendTo(                    YMaps.jQuery("<li></li>").appendTo(menuContainer)                )        };    </script>    <style type="text/css">        /* Оформление меню (начало)*/            #menu {                list-style: none;                margin: 0;                padding: 0;            }            #menu a {                text-decoration: none;                border-bottom: dashed 1px;            }            a.active {                color: #000;            }        /* Оформление меню (конец)*/    </style></head><body>    <table>    <tr>        <td><div id="YMapsID" style="width:800px;height:700px"></div></td>        <td valign="top"><ul id="menu"></ul></td>    </tr>    </table></body></html>